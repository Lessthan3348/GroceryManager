<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Responsive Grocery List with Dark Mode</title>
<style>
  /* Base colors and fonts */
  :root {
    --blue: #4a90e2;
    --light-bg: #f0f4f8;
    --card-bg: #fff;
    --text-color: #222;
    --input-bg: #fff;
    --input-border: #ccc;
    --btn-bg: var(--blue);
    --btn-hover-bg: #357ABD;
    --btn-text: #fff;
    --shadow: rgba(0,0,0,0.1);
  }
  /* Dark mode variables */
  body.dark {
    --light-bg: #121212;
    --card-bg: #1e1e1e;
    --text-color: #eee;
    --input-bg: #333;
    --input-border: #555;
    --btn-bg: #2a64d6;
    --btn-hover-bg: #163a96;
    --btn-text: #eee;
    --shadow: rgba(0,0,0,0.7);
  }

  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    background-color: var(--light-bg);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  h1 {
    text-align: center;
    margin: 1rem 0;
  }
  .container {
    max-width: 700px;
    margin: auto;
    padding: 1rem;
  }
  /* Card style for list area */
  .list-card {
    background: var(--card-bg);
    border-radius: 10px;
    box-shadow: 0 4px 10px var(--shadow);
    padding: 1rem;
  }

  /* Input & add button area */
  .add-item-area {
    display: flex;
    margin-bottom: 1rem;
  }
  .add-item-area input[type="text"] {
    flex-grow: 1;
    padding: 0.6rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--input-border);
    border-radius: 6px 0 0 6px;
    background-color: var(--input-bg);
    color: var(--text-color);
    transition: border-color 0.2s ease;
  }
  .add-item-area input[type="text"]:focus {
    outline: none;
    border-color: var(--btn-bg);
  }
  .add-item-area button {
    padding: 0 1.2rem;
    background: var(--btn-bg);
    border: none;
    color: var(--btn-text);
    font-weight: bold;
    font-size: 1.1rem;
    cursor: pointer;
    border-radius: 0 6px 6px 0;
    transition: background-color 0.3s ease;
  }
  .add-item-area button:hover {
    background: var(--btn-hover-bg);
  }

  /* List styling */
  ul#itemList {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  ul#itemList li {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--card-bg);
    margin-bottom: 0.5rem;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    box-shadow: 0 2px 6px var(--shadow);
  }
  ul#itemList li span.name {
    flex-grow: 1;
    font-weight: 600;
  }
  ul#itemList li input[type="number"],
  ul#itemList li input.unit-input {
    width: 70px;
    margin-left: 10px;
    padding: 0.3rem 0.5rem;
    font-size: 1rem;
    border: 1px solid var(--input-border);
    border-radius: 5px;
    background-color: var(--input-bg);
    color: var(--text-color);
    text-align: center;
    transition: border-color 0.2s ease;
  }
  ul#itemList li input[type="number"]:focus,
  ul#itemList li input.unit-input:focus {
    outline: none;
    border-color: var(--btn-bg);
  }
  ul#itemList li button.delBtn {
    background: #e74c3c;
    border: none;
    color: #fff;
    font-weight: bold;
    padding: 0.3rem 0.7rem;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 10px;
    transition: background-color 0.3s ease;
  }
  ul#itemList li button.delBtn:hover {
    background: #c0392b;
  }

  /* Buttons container */
  .buttons-container {
    margin-top: 1rem;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .buttons-container button {
    flex: 1 1 150px;
    padding: 0.6rem 1rem;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    color: var(--btn-text);
    background-color: var(--btn-bg);
    box-shadow: 0 4px 8px var(--shadow);
    transition: background-color 0.3s ease;
  }
  .buttons-container button:hover {
    background-color: var(--btn-hover-bg);
  }
  /* Specific button colors */
  #whatsappBtn {
    background-color: #25d366;
  }
  #whatsappBtn:hover {
    background-color: #1ebe5a;
  }
  #facebookBtn {
    background-color: #3b5998;
  }
  #facebookBtn:hover {
    background-color: #2d4373;
  }
  #emailBtn {
    background-color: #dd4b39;
  }
  #emailBtn:hover {
    background-color: #b63928;
  }
  #clearListBtn {
    background-color: #888;
  }
  #clearListBtn:hover {
    background-color: #666;
  }
  #darkModeBtn {
    background-color: #444;
  }
  #darkModeBtn:hover {
    background-color: #222;
  }

  /* Autocomplete dropdown */
  #autocomplete {
    position: absolute;
    background: var(--card-bg);
    border: 1px solid var(--input-border);
    border-top: none;
    max-height: 150px;
    overflow-y: auto;
    width: calc(100% - 110px);
    box-shadow: 0 4px 10px var(--shadow);
    z-index: 1000;
    display: none;
    border-radius: 0 0 6px 6px;
  }
  #autocomplete div[role="option"] {
    padding: 0.5rem 1rem;
    cursor: pointer;
  }
  #autocomplete div[role="option"]:hover,
  #autocomplete div[role="option"]:focus {
    background-color: var(--btn-bg);
    color: var(--btn-text);
    outline: none;
  }

  /* Responsive design */
  @media (max-width: 600px) {
    .add-item-area {
      flex-direction: column;
    }
    .add-item-area input[type="text"] {
      border-radius: 6px 6px 0 0;
      width: 100%;
    }
    .add-item-area button {
      border-radius: 0 0 6px 6px;
      width: 100%;
      margin-top: 0.3rem;
    }
    ul#itemList li {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    ul#itemList li input[type="number"],
    ul#itemList li input.unit-input,
    ul#itemList li button.delBtn {
      width: 48%;
      margin-left: 0;
    }
    ul#itemList li span.name {
      flex-basis: 100%;
    }
    .buttons-container button {
      flex-basis: 100%;
    }
    #autocomplete {
      width: 100%;
      left: 0;
      right: 0;
    }
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Grocery List</h1>

    <div class="add-item-area" style="position: relative;">
      <input type="text" id="searchBar" placeholder="Add new item..." aria-label="Add new item" autocomplete="off" />
      <button id="addItemBtn" aria-label="Add item">Add</button>
      <div id="autocomplete" role="listbox" aria-label="Suggested items"></div>
    </div>

    <div class="list-card" aria-live="polite" aria-relevant="additions removals" aria-atomic="true">
      <ul id="itemList" role="list" aria-label="Grocery list"></ul>
    </div>

    <div class="buttons-container">
      <button id="clearListBtn" aria-label="Clear entire list">Clear List</button>
      <button id="whatsappBtn" aria-label="Share list on WhatsApp">WhatsApp</button>
      <button id="facebookBtn" aria-label="Share list on Facebook">Facebook</button>
      <button id="emailBtn" aria-label="Share list via Email">Email</button>
      <button id="darkModeBtn" aria-label="Toggle dark mode">Toggle Dark Mode</button>
    </div>
  </div>

<script>
  const initialItems = [
    { name: "Julmust i burk", quantity: 1, unit: "flak" },
    { name: "Bananer", quantity: 1, unit: "kg" },
    { name: "Vitamin well", quantity: 1, unit: "flak" },
    { name: "Vichy", quantity: 1, unit: "flak" },
    { name: "Pepsi max", quantity: 1, unit: "flak" },
    { name: "Pepsi", quantity: 1, unit: "flak" },
    { name: "Mjölkchoklad", quantity: 1, unit: "st" },
    { name: "Dajm", quantity: 1, unit: "st" },
    { name: "Ballerina", quantity: 1, unit: "st" },
    { name: "Marabou", quantity: 1, unit: "st" },
    { name: "Milkshake Vanilj", quantity: 1, unit: "st" },
    { name: "Milkshake Choklad", quantity: 1, unit: "st" },
    { name: "Bregott", quantity: 1, unit: "st" },
    { name: "Vaniljglass", quantity: 1, unit: "st" },
    { name: "Hushållsost skivad", quantity: 1, unit: "st" },
    { name: "Majs", quantity: 1, unit: "burk" },
    { name: "Lätt crème fraiche", quantity: 1, unit: "st" },
    { name: "Creme fraiche", quantity: 1, unit: "st" },
    { name: "Gräslök", quantity: 1, unit: "knippe" },
    { name: "Senap", quantity: 1, unit: "burk" },
    { name: "Bregott lätt", quantity: 1, unit: "st" },
    { name: "Ärtor", quantity: 1, unit: "burk" },
    { name: "Äppelmos", quantity: 1, unit: "burk" },
    { name: "Jordgubbssylt", quantity: 1, unit: "burk" },
    { name: "Lingonsylt", quantity: 1, unit: "burk" },
    { name: "Krossade tomater", quantity: 1, unit: "burk" },
    { name: "Tacokrydda", quantity: 1, unit: "påse" },
    { name: "Jalapenos", quantity: 1, unit: "burk" },
    { name: "Chili con carne krydda", quantity: 1, unit: "påse" },
    { name: "Svarta bönor", quantity: 1, unit: "burk" },
    { name: "Fryst mango", quantity: 1, unit: "påse" },
    { name: "Gräddfil", quantity: 1, unit: "st" },
    { name: "Äpple", quantity: 1, unit: "kg" },
    { name: "Apelsin", quantity: 1, unit: "kg" },
    { name: "Banana", quantity: 1, unit: "kg" }
  ];

  const groceries = initialItems.map(i => i.name);

  let items = [...initialItems];

  const itemList = document.getElementById('itemList');
  const searchBar = document.getElementById('searchBar');
  const autocomplete = document.getElementById('autocomplete');
  const addItemBtn = document.getElementById('addItemBtn');
  const clearListBtn = document.getElementById('clearListBtn');
  const whatsappBtn = document.getElementById('whatsappBtn');
  const facebookBtn = document.getElementById('facebookBtn');
  const emailBtn = document.getElementById('emailBtn');
  const darkModeBtn = document.getElementById('darkModeBtn');

  // Render list function
  function renderList() {
    itemList.innerHTML = '';
    if(items.length === 0){
      const emptyMsg = document.createElement('li');
      emptyMsg.textContent = "Your list is empty.";
      emptyMsg.style.textAlign = "center";
      emptyMsg.style.color = "var(--btn-bg)";
      emptyMsg.style.fontWeight = "bold";
      itemList.appendChild(emptyMsg);
      return;
    }
    items.forEach((item, i) => {
      const li = document.createElement('li');
      li.setAttribute('role', 'listitem');

      const nameSpan = document.createElement('span');
      nameSpan.classList.add('name');
      nameSpan.textContent = item.name;
      li.appendChild(nameSpan);

      // Quantity input
      const quantityInput = document.createElement('input');
      quantityInput.type = 'number';
      quantityInput.min = '0';
      quantityInput.step = 'any';
      quantityInput.value = item.quantity;
      quantityInput.setAttribute('aria-label', `Quantity for ${item.name}`);
      quantityInput.addEventListener('change', (e) => {
        const val = parseFloat(e.target.value);
        items[i].quantity = isNaN(val) || val < 0 ? 0 : val;
        renderList();
      });
      li.appendChild(quantityInput);

      // Unit input
      const unitInput = document.createElement('input');
      unitInput.type = 'text';
      unitInput.value = item.unit;
      unitInput.classList.add('unit-input');
      unitInput.setAttribute('aria-label', `Unit for ${item.name}`);
      unitInput.addEventListener('input', (e) => {
        items[i].unit = e.target.value.trim();
      });
      li.appendChild(unitInput);

      // Remove button
      const delBtn = document.createElement('button');
      delBtn.classList.add('delBtn');
      delBtn.setAttribute('aria-label', `Remove ${item.name}`);
      delBtn.textContent = 'Remove';
      delBtn.addEventListener('click', () => {
        items.splice(i, 1);
        renderList();
      });
      li.appendChild(delBtn);

      itemList.appendChild(li);
    });
  }

  // Add item function (with validation)
  function addItem(name) {
    name = name.trim();
    if(name === '') return;
    // Check if item already exists (case-insensitive)
    const exists = items.find(i => i.name.toLowerCase() === name.toLowerCase());
    if (exists) {
      alert("Item already in the list!");
      return;
    }
    items.push({ name, quantity: 1, unit: '' });
    renderList();
  }

  // Add item button click
  addItemBtn.addEventListener('click', () => {
    addItem(searchBar.value);
    searchBar.value = '';
    autocomplete.style.display = 'none';
    searchBar.setAttribute('aria-expanded', 'false');
    searchBar.focus();
  });

  // Add item with Enter key
  searchBar.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      e.preventDefault();
      addItem(searchBar.value);
      searchBar.value = '';
      autocomplete.style.display = 'none';
      searchBar.setAttribute('aria-expanded', 'false');
    }
  });

  // Autocomplete on input
  searchBar.addEventListener('input', () => {
    const val = searchBar.value.trim().toLowerCase();
    if (val.length === 0) {
      autocomplete.style.display = 'none';
      searchBar.setAttribute('aria-expanded', 'false');
      return;
    }
    // Filter groceries that start with val, exclude already in list
    const matches = groceries.filter(g => g.toLowerCase().startsWith(val) && !items.some(i => i.name.toLowerCase() === g.toLowerCase()));
    autocomplete.innerHTML = '';
    if (matches.length > 0) {
      matches.forEach(match => {
        const div = document.createElement('div');
        div.textContent = match;
        div.tabIndex = 0;
        div.setAttribute('role', 'option');
        div.addEventListener('click', () => {
          addItem(match);
          searchBar.value = '';
          autocomplete.style.display = 'none';
          searchBar.setAttribute('aria-expanded', 'false');
          searchBar.focus();
        });
        div.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            div.click();
          }
        });
        autocomplete.appendChild(div);
      });
      autocomplete.style.display = 'block';
      searchBar.setAttribute('aria-expanded', 'true');
    } else {
      autocomplete.style.display = 'none';
      searchBar.setAttribute('aria-expanded', 'false');
    }
  });

  // Clicking outside closes autocomplete
  document.addEventListener('click', (e) => {
    if (!autocomplete.contains(e.target) && e.target !== searchBar) {
      autocomplete.style.display = 'none';
      searchBar.setAttribute('aria-expanded', 'false');
    }
  });

  // Clear list button
  clearListBtn.addEventListener('click', () => {
    if(confirm('Are you sure you want to clear the entire list?')) {
      items = [];
      renderList();
    }
  });

  // Sharing functions
  function shareList(platform) {
    if (items.length === 0) {
      alert("List is empty to share!");
      return;
    }
    const textLines = items.map(i => `${i.quantity} ${i.unit} ${i.name}`.trim());
    const text = encodeURIComponent("Grocery List:\n" + textLines.join('\n'));

    if (platform === 'whatsapp') {
      const url = `https://wa.me/?text=${text}`;
      window.open(url, '_blank');
    } else if (platform === 'facebook') {
      // Facebook share can use a text-only page or fallback to generic share
      alert("Facebook sharing is not supported for text only. Please copy the list manually.");
    } else if (platform === 'email') {
      const subject = encodeURIComponent("Grocery List");
      const mailto = `mailto:?subject=${subject}&body=${textLines.join('\n')}`;
      window.location.href = mailto;
    }
  }

  whatsappBtn.addEventListener('click', () => shareList('whatsapp'));
  facebookBtn.addEventListener('click', () => shareList('facebook'));
  emailBtn.addEventListener('click', () => shareList('email'));

  // Dark mode toggle
  darkModeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
  });

  // Initial render
  renderList();
</script>
</body>
</html>




