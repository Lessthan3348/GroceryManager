<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grocery List</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  body {
    margin: 0; padding: 0;
    font-family: 'Montserrat', sans-serif;
    background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed;
    background-size: cover;
    color: #222;
    transition: background-color 0.5s, color 0.5s;
  }
  body.dark {
    background: #121212;
    color: #eee;
  }
  .container {
    max-width: 1000px;
    margin: 1rem auto;
    background: rgba(255 255 255 / 0.85);
    padding: 1rem 2rem 3rem;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgb(0 0 0 / 0.3);
    transition: background 0.5s, color 0.5s;
  }
  body.dark .container {
    background: rgba(0 0 0 / 0.85);
    color: #eee;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2rem;
  }
  button#darkModeToggle {
    background: #007bff;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    font-weight: 600;
    border-radius: 25px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgb(0 123 255 / 0.5);
    transition: background-color 0.3s, transform 0.3s;
  }
  button#darkModeToggle:hover {
    background: #0056b3;
    transform: scale(1.1);
  }

  main {
    display: flex;
    gap: 2rem;
    margin-top: 1.5rem;
    flex-wrap: wrap;
  }

  section {
    flex: 1 1 400px;
    min-width: 280px;
    max-height: 600px;
    overflow-y: auto;
    background: rgba(255 255 255 / 0.95);
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 5px 15px rgb(0 0 0 / 0.1);
    transition: background 0.5s;
  }
  body.dark section {
    background: rgba(20 20 20 / 0.95);
  }

  h2 {
    margin-top: 0;
    text-align: center;
    font-weight: 700;
    margin-bottom: 1rem;
    font-size: 1.5rem;
  }

  ul {
    list-style: none;
    margin: 0; padding: 0;
  }
  li.item, li.grocery-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.4rem 0.6rem;
    border-bottom: 1px solid #ddd;
    transition: background-color 0.3s;
  }
  body.dark li.item, body.dark li.grocery-item {
    border-color: #444;
  }
  li.item:hover {
    background: #e7f1ff;
  }
  body.dark li.item:hover {
    background: #333a55;
  }

  li.item button,
  li.grocery-item button {
    background: #28a745;
    border: none;
    color: white;
    padding: 0.3rem 0.7rem;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 4px 6px rgb(40 167 69 / 0.4);
    transition: background-color 0.3s, transform 0.3s;
  }
  li.item button:hover,
  li.grocery-item button:hover {
    background: #19692c;
    transform: scale(1.1);
  }
  body.dark li.item button,
  body.dark li.grocery-item button {
    background: #66bb6a;
    box-shadow: 0 4px 6px rgb(102 187 106 / 0.7);
  }
  body.dark li.item button:hover,
  body.dark li.grocery-item button:hover {
    background: #2e7d32;
  }

  li.grocery-item {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  li.grocery-item span {
    flex: 1 1 100%;
    font-weight: 600;
  }
  .input-group {
    display: flex;
    gap: 0.5rem;
    flex: 1 1 auto;
  }
  .input-group input {
    width: 80px;
    padding: 0.2rem 0.4rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    transition: border-color 0.3s;
  }
  .input-group input:focus {
    outline: none;
    border-color: #007bff;
  }
  body.dark .input-group input {
    background: #222;
    color: #eee;
    border-color: #555;
  }
  body.dark .input-group input:focus {
    border-color: #3399ff;
  }

  /* Scrollbars */
  section::-webkit-scrollbar {
    width: 8px;
  }
  section::-webkit-scrollbar-track {
    background: transparent;
  }
  section::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.2);
    border-radius: 4px;
  }
  body.dark section::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.3);
  }

  /* Share Buttons */
  .share-buttons {
    display: flex;
    justify-content: center;
    margin-top: 1rem;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .share-buttons button {
    background: none;
    border: none;
    cursor: pointer;
    transition: transform 0.3s;
    font-size: 1.6rem;
  }
  .share-buttons button:hover {
    transform: scale(1.3);
  }
  /* Brand colors for share icons */
  .share-whatsapp { color: #25D366; }
  .share-facebook { color: #1877F2; }
  .share-twitter { color: #1DA1F2; }
  .share-email { color: #D44638; }

  /* Responsive layout */
  @media (max-width: 800px) {
    main {
      flex-direction: column;
    }
    .input-group input {
      width: 60px;
      font-size: 0.9rem;
    }
    li.grocery-item span {
      flex: 1 1 auto;
    }
  }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>Min ink√∂pslista</h1>
    <button id="darkModeToggle" aria-pressed="false" aria-label="Toggle m√∂rkt l√§ge">M√∂rkt l√§ge</button>
  </header>

  <main>
    <section aria-label="Tillg√§ngliga produkter">
      <h2>V√§lj produkter</h2>
      <ul id="items" role="list"></ul>
    </section>

    <section aria-label="Din ink√∂pslista">
      <h2>Din lista</h2>
      <ul id="groceryList" role="list"></ul>

      <div class="share-buttons" aria-label="Dela din ink√∂pslista">
        <button class="share-whatsapp" aria-label="Dela via WhatsApp" title="WhatsApp">üì±</button>
        <button class="share-facebook" aria-label="Dela via Facebook" title="Facebook">üìò</button>
        <button class="share-twitter" aria-label="Dela via Twitter" title="Twitter">üê¶</button>
        <button class="share-email" aria-label="Dela via E-post" title="E-post">‚úâÔ∏è</button>
      </div>
    </section>
  </main>
</div>

<script>
  // Dark mode toggle
  const darkToggleBtn = document.getElementById('darkModeToggle');
  darkToggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    darkToggleBtn.setAttribute('aria-pressed', isDark);
    darkToggleBtn.textContent = isDark ? 'Ljust l√§ge' : 'M√∂rkt l√§ge';
  });

  // Allowed items list (full text for clarity)
  const allowedItemsRaw = [
    "1 p√•se napolitana salads mix",
    "1 kg tomat",
    "1 kg championer",
    "1 kg r√∂dl√∂k",
    "1 st margarin flytande rama",
    "1 dunk olivolja extra virgin 5 L",
    "1 kg gurka ofilmad",
    "1 kg citron",
    "1 hink handskalade r√§kor",
    "1/2 kg granny smith √§pplen gr√∂na",
    "1 flak Raml√∂sa naturell i burk",
    "1 flak coca cola i burk",
    "1 flak coca cola zero i burk",
    "1 liter standard mj√∂lk",
    "1 spray gr√§dde",
    "1 liter rama gr√§dde",
    "1 p√•se riven mozzarella ost",
    "1 p√•se riven grano padano",
    "2 st 500 gram sm√∂r red label arla",
    "15 st bakad potatis",
    "5 kg spaghetti",
    "1 ch√®vre rulle",
    "1 p√•se mospotatis chefs cut",
    "1 ask ruccola",
    "1 kg lime",
    "1 ask basilika",
    "1 knippe f√§rsk mynta",
    "1 kg apelsin",
    "1 ask salami Milano",
    "1 burk stenbitsrom",
    "1 hink kokta √§gg skalade",
    "1 p√•se jordn√∂tter saltade",
    "1 p√•se valn√∂tsk√§rnor",
    "1 p√•se vitl√∂kskrutonger",
    "1 kartong grillad kycklingbr√∂st fryst",
    "1 knippe dill",
    "1 kg tv√§ttad kul potatis",
    "1 roman huvuden",
    "1 st godmorgon apelsinjuice",
    "1 st godmorgon √§pple juice",
    "1 flak Sprite i burk",
    "1 kartong mozzarella bollar",
    "1 ask Prochutto crudo",
    "1 kartong fryst lingon",
    "1 crisp sallad"
  ];

  const itemsUl = document.getElementById('items');
  const groceryListUl = document.getElementById('groceryList');

  // Populate selectable items list
  allowedItemsRaw.forEach(fullItem => {
    const li = document.createElement('li');
    li.className = 'item';
    li.textContent = fullItem;
    const addBtn = document.createElement('button');
    addBtn.textContent = 'L√§gg till';
    addBtn.setAttribute('aria-label', 'L√§gg till ' + fullItem);
    li.appendChild(addBtn);

    addBtn.addEventListener('click', () => {
      addGroceryItem(fullItem);
    });

    itemsUl.appendChild(li);
  });

  const groceryItems = [];

  function addGroceryItem(fullItemText) {
    if (groceryItems.some(i => i.fullItemText === fullItemText)) return;

    // Parse quantity and unit
    let quantity = '';
    let unit = '';
    let name = fullItemText;

    const regex = /^(\d+\/?\d*)\s*(kg|st|liter|flak|p√•se|dunk|hink|spray|ask|knippe|kartong|burk|spray|gram)?\s*(.*)$/i;
    const match = fullItemText.match(regex);
    if (match) {
      quantity = match[1] || '';
      unit = match[2] || '';
      name = match[3] || fullItemText;
    }

    const id = Date.now() + Math.random().toString(36).slice(2, 7);
    groceryItems.push({ id, quantity, unit, name, fullItemText });
    renderGroceryList();
  }

  function renderGroceryList() {
    groceryListUl.innerHTML = '';
    groceryItems.forEach(item => {
      const li = document.createElement('li');
      li.className = 'grocery-item';

      const nameSpan = document.createElement('span');
      nameSpan.textContent = item.name;
      nameSpan.title = 'Produktnamn';
      li.appendChild(nameSpan);

      const qtyInput = document.createElement('input');
      qtyInput.type = 'text';
      qtyInput.value = item.quantity;
      qtyInput.title = 'M√§ngd';
      qtyInput.setAttribute('aria-label', `M√§ngd f√∂r ${item.name}`);
      qtyInput.addEventListener('input', e => {
        item.quantity = e.target.value;
      });

      const unitInput = document.createElement('input');
      unitInput.type = 'text';
      unitInput.value = item.unit;
      unitInput.title = 'Enhet';
      unitInput.setAttribute('aria-label', `Enhet f√∂r ${item.name}`);
      unitInput.addEventListener('input', e => {
        item.unit = e.target.value;
      });

      const inputGroup = document.createElement('div');
      inputGroup.className = 'input-group';
      inputGroup.appendChild(qtyInput);
      inputGroup.appendChild(unitInput);
      li.appendChild(inputGroup);

      const removeBtn = document.createElement('button');
      removeBtn.textContent = 'Ta bort';
      removeBtn.title = 'Ta bort fr√•n listan';
      removeBtn.setAttribute('aria-label', 'Ta bort ' + item.name + ' fr√•n listan');
      removeBtn.addEventListener('click', () => {
        const index = groceryItems.findIndex(i => i.id === item.id);
        if (index !== -1) {
          groceryItems.splice(index, 1);
          renderGroceryList();
        }
      });

      li.appendChild(removeBtn);
      groceryListUl.appendChild(li);
    });
  }

  // Share buttons functionality
  const shareButtons = {
    whatsapp: document.querySelector('.share-whatsapp'),
    facebook: document.querySelector('.share-facebook'),
    twitter: document.querySelector('.share-twitter'),
    email: document.querySelector('.share-email')
  };

  function getGroceryText() {
    if (groceryItems.length === 0) return "Min ink√∂pslista √§r tom.";
    return groceryItems.map(i => `${i.quantity} ${i.unit} ${i.name}`).join('\n');
  }

  shareButtons.whatsapp.addEventListener('click', () => {
    const text = encodeURIComponent(getGroceryText());
    window.open(`https://api.whatsapp.com/send?text=${text}`, '_blank');
  });

  shareButtons.facebook.addEventListener('click', () => {
    const text = encodeURIComponent(getGroceryText());
    const url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent('https://example.com') + '&quote=' + text;
    window.open(url, '_blank');
  });

  shareButtons.twitter.addEventListener('click', () => {
    const text = encodeURIComponent(getGroceryText());
    const url = `https://twitter.com/intent/tweet?text=${text}`;
    window.open(url, '_blank');
  });

  shareButtons.email.addEventListener('click', () => {
    const subject = encodeURIComponent('Min ink√∂pslista');
    const body = encodeURIComponent(getGroceryText());
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  });
</script>
</body>
</html>



