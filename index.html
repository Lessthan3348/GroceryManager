<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Grocery Manager</title>
  <style>
    :root {
      --bg: #f0f0f0;
      --card-bg: #fff;
      --text: #333;
      --primary: #ff5722;
      --button: #007bff;
      --remove: #dc3545;
      --undo: #6f42c1;
      --whatsapp: #25D366;
      --facebook: #1877F2;
      --copy: #555;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 2rem;
      font-family: sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    .container { max-width: 700px; margin: auto; }
    h1 { margin-bottom: 1rem; color: var(--primary); }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
      margin-bottom: 1.5rem;
    }
    .controls button {
      padding: .5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
      transition: transform .2s;
    }
    .controls button:hover { transform: scale(1.05); }
    #darkToggle { background: var(--primary); }
    #undoBtn { background: var(--undo); }
    #copyBtn { background: var(--copy); }
    #whatsappBtn { background: var(--whatsapp); }
    #facebookBtn { background: var(--facebook); }
    .list {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,.1);
      margin-bottom: 2rem;
    }
    .list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: .5rem 0;
      border-bottom: 1px solid #ddd;
    }
    .list-item:last-child { border-bottom: none; }
    .list-item span { flex: 1; }
    .list-item button {
      margin-left: 1rem;
      padding: .4rem .8rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: #fff;
      font-size: .9rem;
      transition: transform .2s;
    }
    .list-item button:hover { transform: scale(1.05); }
    .btn-add { background: var(--button); }
    .btn-remove { background: var(--remove); }
  </style>
</head>
<body>
  <div class="container">
    <h1>Grocery Manager</h1>
    <div class="controls">
      <button id="darkToggle">Toggle Theme</button>
      <button id="undoBtn" disabled>Undo Remove</button>
      <button id="copyBtn">Copy List</button>
      <button id="whatsappBtn">Share WhatsApp</button>
      <button id="facebookBtn">Share Facebook</button>
    </div>

    <div class="list" id="availableList">
      <!-- Available items go here -->
    </div>

    <h2>Your List</h2>
    <div class="list" id="groceryList">
      <!-- Your grocery items go here -->
    </div>
  </div>

  <script>
  (function(){
    const items = [
      "Påse Napolitana salads mix",
      "Tomat", "Championer", "Rödlök", "Margarin flytande rama",
      "Olivolja extra virgin", "Gurka ofilmad", "Citron",
      "Handskalade räkor", "Granny Smith äpplen gröna",
      "Ramlösa naturell i burk", "Coca Cola i burk", "Coca Cola Zero i burk",
      "Standard mjölk", "Spray grädde", "Rama grädde",
      "Riven mozzarella ost", "Riven grano padano", "Smör red label Arla",
      "Bakad potatis", "Spaghetti", "Chèvre rulle",
      "Mospotatis chefs cut", "Ruccola", "Lime",
      "Basilika", "Färsk mynta", "Apelsin",
      "Salami Milano", "Stenbitsrom", "Kokta ägg skalade",
      "Jordnötter saltade", "Valnötskärnor", "Vitlökskrutonger",
      "Grillad kycklingbröst fryst", "Dill", "Tvättad kul potatis",
      "Roman huvuden", "Godmorgon apelsinjuice", "Godmorgon äpple juice",
      "Sprite i burk", "Mozzarella bollar", "Prochutto crudo",
      "Fryst lingon", "Crisp sallad"
    ];

    const availableList = document.getElementById('availableList');
    const groceryList  = document.getElementById('groceryList');
    const darkToggle   = document.getElementById('darkToggle');
    const undoBtn      = document.getElementById('undoBtn');
    const copyBtn      = document.getElementById('copyBtn');
    const whatsappBtn  = document.getElementById('whatsappBtn');
    const facebookBtn  = document.getElementById('facebookBtn');

    let state = {
      grocery: JSON.parse(localStorage.getItem('grocery')) || [],
      dark:    JSON.parse(localStorage.getItem('dark'))    || false,
      lastRemoved: null
    };

    function save() {
      localStorage.setItem('grocery', JSON.stringify(state.grocery));
      localStorage.setItem('dark', JSON.stringify(state.dark));
    }

    function renderAvailable() {
      availableList.innerHTML = '';
      items.forEach(name => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = \`
          <span>\${name}</span>
          <button class="btn-add">Add</button>
        \`;
        div.querySelector('button').addEventListener('click', () => {
          state.grocery.push(name);
          save(); renderGrocery();
        });
        availableList.appendChild(div);
      });
    }

    function renderGrocery() {
      groceryList.innerHTML = '';
      state.grocery.forEach((name, idx) => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = \`
          <span>\${name}</span>
          <button class="btn-remove">Remove</button>
        \`;
        div.querySelector('button').addEventListener('click', () => {
          state.lastRemoved = { name, idx };
          state.grocery.splice(idx,1);
          undoBtn.disabled = false;
          save(); renderGrocery();
        });
        groceryList.appendChild(div);
      });
    }

    function getText() {
      return state.grocery.join('\\n');
    }
    function copyList() {
      navigator.clipboard.writeText(getText());
      copyBtn.textContent = 'Copied!';
      setTimeout(()=> copyBtn.textContent='Copy List',1500);
    }
    function shareURL(base){
      window.open(base + encodeURIComponent(getText()), '_blank');
    }

    darkToggle.onclick = () => {
      state.dark = !state.dark;
      document.body.dataset.theme = state.dark ? 'dark':'';
      save();
    };
    undoBtn.onclick = () => {
      if (!state.lastRemoved) return;
      state.grocery.splice(state.lastRemoved.idx,0,state.lastRemoved.name);
      state.lastRemoved = null;
      undoBtn.disabled = true;
      save(); renderGrocery();
    };
    copyBtn.onclick     = copyList;
    whatsappBtn.onclick = ()=> shareURL('https://api.whatsapp.com/send?text=');
    facebookBtn.onclick = ()=> shareURL('https://www.facebook.com/sharer/sharer.php?u=&quote=');

    // initialize
    document.body.dataset.theme = state.dark ? 'dark':'';
    renderAvailable();
    renderGrocery();
  })();
  </script>
</body>
</html>
