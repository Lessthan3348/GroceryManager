<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shopping List with Advanced Features</title>
  <style>
    :root {
      --light-bg: #ffffff;
      --light-text: #000000;
      --dark-bg: #181818;
      --dark-text: #ffffff;
      --primary-color: #6200ea;
      --secondary-color: #03dac6;
      --btn-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      --btn-shadow-hover: 0 6px 12px rgba(0, 0, 0, 0.25);
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: var(--light-bg);
      color: var(--light-text);
      transition: background-color 0.3s, color 0.3s;
      padding: 20px;
    }

    .dark-mode {
      background-color: var(--dark-bg);
      color: var(--dark-text);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      border-radius: 10px;
      background-color: var(--light-bg);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s;
    }

    .dark-mode .container {
      background-color: var(--dark-bg);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
    }

    h1 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 15px;
    }

    .dark-mode h1 {
      color: var(--secondary-color);
    }

    .search-bar {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
      transition: border-color 0.3s;
    }

    .search-bar:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: var(--btn-shadow-hover);
    }

    .lists-wrapper {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .list-section {
      flex: 1 1 45%;
      min-width: 280px;
    }

    h2 {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .dark-mode h2 {
      color: var(--secondary-color);
    }

    ul {
      list-style: none;
      padding: 0;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #ccc;
      border-radius: 6px;
      background-color: var(--light-bg);
      transition: background-color 0.3s, border-color 0.3s;
    }

    .dark-mode ul {
      background-color: var(--dark-bg);
      border-color: #555;
    }

    li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    }

    .dark-mode li {
      border-color: #444;
    }

    li:hover {
      background-color: var(--secondary-color);
      color: var(--dark-bg);
      cursor: pointer;
    }

    .item-name {
      flex: 1;
    }

    button.add-btn,
    button.remove-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      background-color: var(--primary-color);
      color: #fff;
      cursor: pointer;
      box-shadow: var(--btn-shadow);
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
    }

    button.add-btn:hover,
    button.remove-btn:hover {
      background-color: var(--secondary-color);
      box-shadow: var(--btn-shadow-hover);
      transform: scale(1.05);
    }

    button.remove-btn {
      background-color: #d9534f;
    }

    button.remove-btn:hover {
      background-color: #c9302c;
    }

    .qty-input {
      width: 50px;
      margin: 0 8px;
      padding: 4px;
      border-radius: 4px;
      border: 1px solid #ccc;
      text-align: center;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    .qty-input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: var(--btn-shadow-hover);
    }

    select.unit-select {
      margin-right: 8px;
      padding: 4px 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    select.unit-select:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: var(--btn-shadow-hover);
    }

    /* Share buttons container */
    .share-buttons {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .share-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      color: #fff;
      box-shadow: var(--btn-shadow);
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
      user-select: none;
      text-decoration: none;
    }

    .share-btn svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    .share-btn:hover {
      box-shadow: var(--btn-shadow-hover);
      transform: scale(1.1);
    }

    .share-btn.whatsapp {
      background-color: #25d366;
    }

    .share-btn.whatsapp:hover {
      background-color: #1ebe5d;
    }

    .share-btn.facebook {
      background-color: #3b5998;
    }

    .share-btn.facebook:hover {
      background-color: #2d4373;
    }

    .share-btn.twitter {
      background-color: #1da1f2;
    }

    .share-btn.twitter:hover {
      background-color: #0d95e8;
    }

    .share-btn.copy {
      background-color: #6c757d;
      font-size: 18px;
    }

    .share-btn.copy:hover {
      background-color: #565e64;
    }

    /* Dark mode adjustments for buttons */
    .dark-mode .share-btn.whatsapp {
      background-color: #1ebe5d;
    }

    .dark-mode .share-btn.facebook {
      background-color: #2d4373;
    }

    .dark-mode .share-btn.twitter {
      background-color: #0d95e8;
    }

    .dark-mode .share-btn.copy {
      background-color: #565e64;
    }

    .toggle {
      display: flex;
      justify-content: center;
      margin-top: 25px;
    }

    .toggle button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      background-color: var(--primary-color);
      color: #fff;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      box-shadow: var(--btn-shadow);
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
      user-select: none;
    }

    .toggle button:hover {
      background-color: var(--secondary-color);
      box-shadow: var(--btn-shadow-hover);
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Shopping List</h1>
    <input
      type="search"
      id="search"
      class="search-bar"
      placeholder="Search items to add..."
      aria-label="Search items to add"
      autocomplete="off"
      spellcheck="false"
    />

    <div class="lists-wrapper">
      <section class="list-section" aria-label="Available items">
        <h2>Available Items</h2>
        <ul id="available-list"></ul>
      </section>

      <section class="list-section" aria-label="Your shopping list">
        <h2>Your List</h2>
        <ul id="shopping-list"></ul>
      </section>
    </div>

    <div class="share-buttons" role="group" aria-label="Share shopping list">
      <button class="share-btn whatsapp" onclick="shareWhatsApp()" title="Share on WhatsApp" aria-label="Share on WhatsApp">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M20.52 3.48A11.93 11.93 0 0012 0C5.373 0 0 5.373 0 12c0 2.116.556 4.128 1.6 5.94L0 24l6.24-1.6A11.926 11.926 0 0012 24c6.627 0 12-5.373 12-12 0-3.192-1.243-6.213-3.48-8.52zm-8.28 16.56c-2.304 0-4.3-1.2-5.368-3.024l-.376-.624 3.28-1.616.264.4c.576.832 1.472 1.456 2.52 1.456 2.568 0 4.656-2.088 4.656-4.656 0-2.568-2.088-4.656-4.656-4.656-2.544 0-4.632 2.04-4.632 4.536 0 .736.2 1.432.56 2.04l-.656.72-3.016-1.48-.056-.024-.128-.08c-.376-.216-.776-.432-1.176-.632l-.176-.096c-.016-.016-.024-.032-.032-.04a7.406 7.406 0 01-1.2-2.152l-.04-.152c-.024-.128-.04-.256-.04-.392a6.735 6.735 0 0112.984-2.952c0 3.72-3.024 6.72-6.744 6.72z"></path>
        </svg>
        WhatsApp
      </button>
      <button class="share-btn facebook" onclick="shareFacebook()" title="Share on Facebook" aria-label="Share on Facebook">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M22.675 0h-21.35C.597 0 0 .593 0 1.326v21.348C0 23.406.597 24 1.325 24H12.82v-9.294H9.692V11.01h3.128V8.41c0-3.1 1.892-4.788 4.657-4.788 1.324 0 2.463.1 2.796.144v3.24l-1.92.001c-1.504 0-1.796.715-1.796 1.763v2.31h3.587l-.467 3.696h-3.12V24h6.116C23.403 24 24 23.406 24 22.674V1.326C24 .593 23.403 0 22.675 0z"></path>
        </svg>
        Facebook
      </button>
      <button class="share-btn twitter" onclick="shareTwitter()" title="Share on Twitter" aria-label="Share on Twitter">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M23.954 4.569c-.885.39-1.83.654-2.825.775a4.932 4.932 0 002.163-2.724 9.865 9.865 0 01-3.127 1.195 4.917 4.917 0 00-8.379 4.482A13.94 13.94 0 011.671 3.149a4.917 4.917 0 001.523 6.556 4.897 4.897 0 01-2.224-.616v.062a4.917 4.917 0 003.946 4.817 4.902 4.902 0 01-2.217.085 4.917 4.917 0 004.588 3.417A9.867 9.867 0 010 19.54a13.918 13.918 0 007.548 2.212c9.056 0 14.01-7.496 14.01-13.986 0-.21 0-.423-.015-.633A9.936 9.936 0 0024 4.59z"></path>
        </svg>
        Twitter
      </button>
      <button class="share-btn copy" onclick="copyList()" title="Copy list to clipboard" aria-label="Copy list to clipboard">
        游늶 Copy
      </button>
    </div>

    <div class="toggle">
      <button id="dark-mode-toggle" aria-pressed="false">Toggle Dark Mode</button>
    </div>
  </div>

  <script>
    const availableList = document.getElementById('available-list');
    const shoppingList = document.getElementById('shopping-list');
    const searchInput = document.getElementById('search');
    const darkModeToggle = document.getElementById('dark-mode-toggle');

    // Your original detailed items here as available items (name only)
    const availableItems = [
      "p친se napolitana salads mix",
      "kg tomat",
      "kg championer",
      "kg r칬dl칬k",
      "st margarin flytande rama",
      "dunk olivolja extra virgin 5 L",
      "kg gurka ofilmad",
      "kg citron",
      "hink handskalade r칛kor",
      "1/2 kg granny smith 칛pplen gr칬na",
      "flak Raml칬sa naturell i burk",
      "flak coca cola i burk",
      "flak coca cola zero i burk",
      "liter standard mj칬lk",
      "spray gr칛dde",
      "liter rama gr칛dde",
      "p친se riven mozzarella ost",
      "p친se riven grano padano",
      "st 500 gram sm칬r red label arla",
      "st bakad potatis",
      "kg spaghetti",
      "ch칟vre rulle",
      "p친se mospotatis chefs cut",
      "ask ruccola",
      "kg lime",
      "ask basilika",
      "knippe f칛rsk mynta",
      "kg apelsin",
      "ask salami Milano",
      "burk stenbitsrom",
      "hink kokta 칛gg skalade",
      "p친se jordn칬tter saltade",
      "p친se valn칬tsk칛rnor",
      "p친se vitl칬kskrutonger",
      "kartong grillad kycklingbr칬st fryst",
      "knippe dill",
      "kg tv칛ttad kul potatis",
      "roman huvuden",
      "st godmorgon apelsinjuice",
      "st godmorgon 칛pple juice",
      "flak Sprite i burk",
      "kartong mozzarella bollar",
      "ask Prochutto crudo",
      "kartong fryst lingon",
      "crisp sallad"
    ];

    // State: shopping list items as objects {name, qty, unit}
    let shoppingListItems = [];

    function renderAvailableList(filter = '') {
      availableList.innerHTML = '';
      const filterLower = filter.toLowerCase();

      availableItems.forEach(item => {
        if (!item.toLowerCase().includes(filterLower)) return;

        // Prevent adding duplicates
        const alreadyInList = shoppingListItems.some(i => i.name === item);

        const li = document.createElement('li');
        li.classList.add('available-item');

        const span = document.createElement('span');
        span.textContent = item;
        span.className = 'item-name';

        const btn = document.createElement('button');
        btn.textContent = alreadyInList ? 'Added' : 'Add';
        btn.disabled = alreadyInList;
        btn.className = 'add-btn';

        btn.addEventListener('click', () => {
          addItemToList(item);
          btn.textContent = 'Added';
          btn.disabled = true;
        });

        li.appendChild(span);
        li.appendChild(btn);
        availableList.appendChild(li);
      });
    }

    function addItemToList(name) {
      const existing = shoppingListItems.find(i => i.name === name);
      if (existing) {
        existing.qty = Number(existing.qty) + 1;
      } else {
        shoppingListItems.push({ name, qty: 1, unit: 'pcs' });
      }
      renderShoppingList();
      renderAvailableList(searchInput.value);
    }

    function removeItemFromList(name) {
      shoppingListItems = shoppingListItems.filter(i => i.name !== name);
      renderShoppingList();
      renderAvailableList(searchInput.value);
    }

    function renderShoppingList() {
      shoppingList.innerHTML = '';

      shoppingListItems.forEach(item => {
        const li = document.createElement('li');

        const nameSpan = document.createElement('span');
        nameSpan.textContent = item.name;
        nameSpan.className = 'item-name';

        const qtyInput = document.createElement('input');
        qtyInput.type = 'number';
        qtyInput.min = 1;
        qtyInput.value = item.qty;
        qtyInput.className = 'qty-input';
        qtyInput.setAttribute('aria-label', `Quantity for ${item.name}`);
        qtyInput.addEventListener('change', () => {
          let val = parseInt(qtyInput.value);
          if (isNaN(val) || val < 1) val = 1;
          qtyInput.value = val;
          item.qty = val;
        });

        const unitSelect = document.createElement('select');
        unitSelect.className = 'unit-select';
        unitSelect.setAttribute('aria-label', `Unit for ${item.name}`);

        ['pcs', 'kg', 'liters', 'packs', 'bunch'].forEach(unitOption => {
          const option = document.createElement('option');
          option.value = unitOption;
          option.textContent = unitOption;
          if (unitOption === item.unit) option.selected = true;
          unitSelect.appendChild(option);
        });

        unitSelect.addEventListener('change', () => {
          item.unit = unitSelect.value;
        });

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove';
        removeBtn.className = 'remove-btn';
        removeBtn.setAttribute('aria-label', `Remove ${item.name} from list`);
        removeBtn.addEventListener('click', () => {
          removeItemFromList(item.name);
        });

        li.appendChild(nameSpan);
        li.appendChild(qtyInput);
        li.appendChild(unitSelect);
        li.appendChild(removeBtn);
        shoppingList.appendChild(li);
      });
    }

    searchInput.addEventListener('input', () => {
      renderAvailableList(searchInput.value);
    });

    // Dark mode toggle
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      darkModeToggle.setAttribute('aria-pressed', isDark);
    });

    // Sharing functions
    function getListText() {
      if (shoppingListItems.length === 0) return 'Shopping list is empty.';
      return shoppingListItems
        .map(i => `${i.qty} ${i.unit} - ${i.name}`)
        .join('\n');
    }

    function shareWhatsApp() {
      const text = encodeURIComponent(getListText());
      const url = `https://wa.me/?text=${text}`;
      window.open(url, '_blank');
    }

    function shareFacebook() {
      // Facebook sharing with text is limited; share a URL or fallback to alert
      alert('Facebook sharing with text not supported in this demo.');
    }

    function shareTwitter() {
      const text = encodeURIComponent(getListText());
      const url = `https://twitter.com/intent/tweet?text=${text}`;
      window.open(url, '_blank');
    }

    function copyList() {
      const text = getListText();
      navigator.clipboard.writeText(text).then(() => {
        alert('Shopping list copied to clipboard!');
      });
    }

    // Initial render
    renderAvailableList();
    renderShoppingList();
  </script>
</body>
</html>


