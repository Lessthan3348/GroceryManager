<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shopping List</title>
<style>
  :root {
    --light-bg: #fff;
    --light-text: #222;
    --dark-bg: #181818;
    --dark-text: #eee;
    --primary-color: #6200ea;
    --secondary-color: #03dac6;
    --button-bg: #6200ea;
    --button-hover-bg: #3700b3;
    --button-shadow: rgba(98, 0, 234, 0.5);
  }
  body {
    margin: 0; font-family: Arial, sans-serif;
    background-color: var(--light-bg);
    color: var(--light-text);
    transition: background-color 0.3s, color 0.3s;
  }
  .dark-mode {
    background-color: var(--dark-bg);
    color: var(--dark-text);
  }
  .container {
    max-width: 700px;
    margin: 20px auto;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    background-color: var(--light-bg);
  }
  .dark-mode .container {
    background-color: var(--dark-bg);
    box-shadow: 0 6px 15px rgba(255,255,255,0.1);
  }
  h1 {
    text-align: center;
    color: var(--primary-color);
    margin-bottom: 20px;
  }
  .dark-mode h1 {
    color: var(--secondary-color);
  }

  /* Form */
  .form {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
    justify-content: center;
  }
  .form input[type="text"],
  .form input[type="number"],
  .form select {
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
  }
  #item {
    flex: 2 1 300px;
  }
  #quantity {
    width: 80px;
  }
  #unit {
    width: 100px;
  }
  .form button {
    background-color: var(--button-bg);
    color: white;
    border: none;
    border-radius: 6px;
    padding: 12px 25px;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 6px 15px var(--button-shadow);
    transition: background-color 0.3s, box-shadow 0.3s;
    flex: 1 1 120px;
  }
  .form button:hover,
  .form button:focus {
    background-color: var(--button-hover-bg);
    box-shadow: 0 8px 25px var(--button-shadow);
  }

  /* List */
  ul#list {
    list-style: none;
    padding: 0;
    max-height: 380px;
    overflow-y: auto;
    border-top: 2px solid var(--primary-color);
  }
  ul#list li {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 10px;
    border-bottom: 1px solid #ccc;
    font-size: 1rem;
  }
  .dark-mode ul#list li {
    border-color: #444;
  }

  /* List item details */
  .list-item-details {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .list-item-details input[type="number"] {
    width: 60px;
    padding: 5px;
    border-radius: 4px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }
  .list-item-details select {
    width: 80px;
    padding: 5px;
    border-radius: 4px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }
  .list-item-name {
    flex: 1;
    font-weight: 500;
  }
  /* Remove button */
  .remove-btn {
    background-color: #e53935;
    border: none;
    color: white;
    padding: 8px 14px;
    font-size: 0.9rem;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(229, 57, 53, 0.5);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }
  .remove-btn:hover {
    background-color: #b71c1c;
    box-shadow: 0 6px 20px rgba(183, 28, 28, 0.7);
  }

  /* Share Buttons Container */
  .share {
    margin-top: 20px;
    text-align: center;
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  .share button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background-color: var(--primary-color);
    color: white;
    box-shadow: 0 6px 15px var(--button-shadow);
    transition: background-color 0.3s, box-shadow 0.3s;
  }
  .share button:hover {
    background-color: var(--button-hover-bg);
    box-shadow: 0 8px 25px var(--button-shadow);
  }
  .share button svg {
    width: 22px;
    height: 22px;
    fill: white;
  }

  /* Dark mode toggle */
  .toggle {
    margin-top: 20px;
    text-align: center;
  }
  .toggle button {
    background-color: var(--primary-color);
    border: none;
    border-radius: 8px;
    padding: 10px 25px;
    color: white;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 6px 15px var(--button-shadow);
    transition: background-color 0.3s, box-shadow 0.3s;
  }
  .toggle button:hover {
    background-color: var(--button-hover-bg);
    box-shadow: 0 8px 25px var(--button-shadow);
  }

  /* Autocomplete dropdown */
  .autocomplete-items {
    position: absolute;
    border: 1px solid #ccc;
    border-top: none;
    max-height: 180px;
    overflow-y: auto;
    background-color: white;
    z-index: 1000;
    width: 300px;
    border-radius: 0 0 8px 8px;
  }
  .dark-mode .autocomplete-items {
    background-color: #222;
    color: #eee;
  }
  .autocomplete-item {
    padding: 10px;
    cursor: pointer;
  }
  .autocomplete-item:hover {
    background-color: var(--primary-color);
    color: white;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Shopping List</h1>
    <div style="position: relative;" class="form">
      <input
        type="text"
        id="item"
        placeholder="Search or type item name"
        autocomplete="off"
      />
      <input
        type="number"
        id="quantity"
        min="0.01"
        step="0.01"
        placeholder="Quantity"
        value="1"
      />
      <select id="unit">
        <option value="st">st</option>
        <option value="kg">kg</option>
        <option value="liter">liter</option>
        <option value="påse">påse</option>
        <option value="dunk">dunk</option>
        <option value="hink">hink</option>
        <option value="flak">flak</option>
        <option value="spray">spray</option>
        <option value="ask">ask</option>
        <option value="knippe">knippe</option>
        <option value="burk">burk</option>
        <option value="kartong">kartong</option>
      </select>
      <button onclick="addItem()">Add</button>
      <div id="autocomplete-list" class="autocomplete-items"></div>
    </div>
    <ul id="list"></ul>

    <div class="share">
      <button id="whatsappShare" title="Share on WhatsApp">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20.5 3.5a10 10 0 1 0-11.5 17.7l-2.2 1.4 1.5-2.4A10 10 0 0 0 20.5 3.5zm-8.5 14a7.5 7.5 0 0 1-4-1.2l-.3-.2-2.4.7.7-2.4-.2-.3a7.5 7.5 0 1 1 6.2 3.4zM15 14.5c-.2 0-.5 0-.7-.2l-.5-.3c-.2-.1-.4-.2-.6-.3-.2 0-.5 0-.7.2s-.4.3-.5.5c-.1.1-.2.3-.2.5s.1.5.4.8c.4.4.7.6 1.4.8s1 .3 1.4.3.9-.1 1.2-.3 1.2-.8 1.2-1.6-.8-1.1-1-1.2c-.2 0-.5 0-.7.1z"/></svg>
        WhatsApp
      </button>
      <button id="facebookShare" title="Share on Facebook">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M22.7 0H1.3A1.3 1.3 0 0 0 0 1.3v21.4A1.3 1.3 0 0 0 1.3 24H12v-9.3H9.3v-3.6H12V8.4c0-2.7 1.6-4.2 4-4.2 1.1 0 2 0.1 2.3 0.1v2.7h-1.6c-1.2 0-1.5 0.6-1.5 1.5v1.9h3l-.4 3.6h-2.6V24h5.1A1.3 1.3 0 0 0 24 22.7V1.3A1.3 1.3 0 0 0 22.7 0z"/></svg>
        Facebook
      </button>
      <button id="twitterShare" title="Share on Twitter">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M23.4 4.9c-.8.4-1.6.7-2.5.9a4.3 4.3 0 0 0 1.9-2.4c-.8.5-1.8.8-2.7 1a4.2 4.2 0 0 0-7.2 3.9 11.9 11.9 0 0 1-8.7-4.4 4.3 4.3 0 0 0 1.3 5.7c-.7 0-1.4-.2-2-.5a4.2 4.2 0 0 0 3.3 4.1 4.3 4.3 0 0 1-1.1.2c-.3 0-.6 0-.9-.1a4.2 4.2 0 0 0 4 3 8.5 8.5 0 0 1-5.3 1.8c-.3 0-.6 0-.9 0a11.9 11.9 0 0 0 6.5 1.9c7.8 0 12-6.5 12-12 0-.2 0-.4 0-.6a8.5 8.5 0 0 0 2.1-2.1z"/></svg>
        Twitter
      </button>
    </div>

    <div class="toggle">
      <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    </div>
  </div>

<script>
  // Your full item list with quantity, unit, name
  const availableItems = [
    { qty: 1, unit: 'påse', name: 'napolitana salads mix' },
    { qty: 1, unit: 'kg', name: 'tomat' },
    { qty: 1, unit: 'kg', name: 'championer' },
    { qty: 1, unit: 'kg', name: 'rödlök' },
    { qty: 1, unit: 'st', name: 'margarin flytande rama' },
    { qty: 1, unit: 'dunk', name: 'olivolja extra virgin 5 L' },
    { qty: 1, unit: 'kg', name: 'gurka ofilmad' },
    { qty: 1, unit: 'kg', name: 'citron' },
    { qty: 1, unit: 'hink', name: 'handskalade räkor' },
    { qty: 0.5, unit: 'kg', name: 'granny smith äpplen gröna' },
    { qty: 1, unit: 'flak', name: 'Ramlösa naturell i burk' },
    { qty: 1, unit: 'flak', name: 'coca cola i burk' },
    { qty: 1, unit: 'flak', name: 'coca cola zero i burk' },
    { qty: 1, unit: 'liter', name: 'standard mjölk' },
    { qty: 1, unit: 'spray', name: 'grädde' },
    { qty: 1, unit: 'liter', name: 'rama grädde' },
    { qty: 1, unit: 'påse', name: 'riven mozzarella ost' },
    { qty: 1, unit: 'påse', name: 'riven grano padano' },
    { qty: 2, unit: 'st', name: '500 gram smör red label arla' },
    { qty: 15, unit: 'st', name: 'bakad potatis' },
    { qty: 5, unit: 'kg', name: 'spaghetti' },
    { qty: 1, unit: 'st', name: 'chèvre rulle' },
    { qty: 1, unit: 'påse', name: 'mospotatis chefs cut' },
    { qty: 1, unit: 'ask', name: 'ruccola' },
    { qty: 1, unit: 'kg', name: 'lime' },
    { qty: 1, unit: 'ask', name: 'basilika' },
    { qty: 1, unit: 'knippe', name: 'färsk mynta' },
    { qty: 1, unit: 'kg', name: 'apelsin' },
    { qty: 1, unit: 'ask', name: 'salami Milano' },
    { qty: 1, unit: 'burk', name: 'stenbitsrom' },
    { qty: 1, unit: 'hink', name: 'kokta ägg skalade' },
    { qty: 1, unit: 'påse', name: 'jordnötter saltade' },
    { qty: 1, unit: 'påse', name: 'valnötskärnor' },
    { qty: 1, unit: 'påse', name: 'vitlökskrutonger' },
    { qty: 1, unit: 'kartong', name: 'grillad kycklingbröst fryst' },
    { qty: 1, unit: 'knippe', name: 'dill' },
    { qty: 1, unit: 'kg', name: 'tvättad kul potatis' },
    { qty: 1, unit: 'st', name: 'roman huvuden' },
    { qty: 1, unit: 'st', name: 'godmorgon apelsinjuice' },
    { qty: 1, unit: 'st', name: 'godmorgon äpple juice' },
    { qty: 1, unit: 'flak', name: 'Sprite i burk' },
    { qty: 1, unit: 'kartong', name: 'mozzarella bollar' },
    { qty: 1, unit: 'ask', name: 'Prochutto crudo' },
    { qty: 1, unit: 'kartong', name: 'fryst lingon' },
    { qty: 1, unit: 'st', name: 'crisp sallad' }
  ];

  // Current shopping list
  let shoppingList = [];

  const itemInput = document.getElementById('item');
  const quantityInput = document.getElementById('quantity');
  const unitSelect = document.getElementById('unit');
  const listElem = document.getElementById('list');
  const autocompleteList = document.getElementById('autocomplete-list');

  // Add item to shopping list
  function addItem() {
    const name = itemInput.value.trim();
    const qty = parseFloat(quantityInput.value);
    const unit = unitSelect.value;

    if (!name) {
      alert('Please enter an item name.');
      return;
    }
    if (isNaN(qty) || qty <= 0) {
      alert('Please enter a valid quantity.');
      return;
    }

    // Check if item already in list (case-insensitive)
    const existingIndex = shoppingList.findIndex(
      item => item.name.toLowerCase() === name.toLowerCase() && item.unit === unit
    );

    if (existingIndex !== -1) {
      // If exists, update quantity
      shoppingList[existingIndex].qty += qty;
    } else {
      shoppingList.push({ name, qty, unit });
    }
    renderList();
    clearInputs();
  }

  // Clear inputs after add
  function clearInputs() {
    itemInput.value = '';
    quantityInput.value = '1';
    unitSelect.value = 'st';
    closeAutocomplete();
  }

  // Render shopping list on page
  function renderList() {
    listElem.innerHTML = '';
    shoppingList.forEach((item, idx) => {
      const li = document.createElement('li');

      const detailsDiv = document.createElement('div');
      detailsDiv.classList.add('list-item-details');

      // Quantity input
      const qtyInput = document.createElement('input');
      qtyInput.type = 'number';
      qtyInput.min = '0.01';
      qtyInput.step = '0.01';
      qtyInput.value = item.qty;
      qtyInput.title = 'Change quantity';
      qtyInput.addEventListener('change', () => {
        const val = parseFloat(qtyInput.value);
        if (isNaN(val) || val <= 0) {
          qtyInput.value = item.qty; // revert
          alert('Quantity must be positive number');
          return;
        }
        item.qty = val;
      });

      // Unit select
      const unitSelectElem = document.createElement('select');
      ['st', 'kg', 'liter', 'påse', 'dunk', 'hink', 'flak', 'spray', 'ask', 'knippe', 'burk', 'kartong'].forEach(u => {
        const opt = document.createElement('option');
        opt.value = u;
        opt.textContent = u;
        if (u === item.unit) opt.selected = true;
        unitSelectElem.appendChild(opt);
      });
      unitSelectElem.title = 'Change unit';
      unitSelectElem.addEventListener('change', () => {
        item.unit = unitSelectElem.value;
      });

      // Name span
      const nameSpan = document.createElement('span');
      nameSpan.classList.add('list-item-name');
      nameSpan.textContent = item.name;

      detailsDiv.appendChild(qtyInput);
      detailsDiv.appendChild(unitSelectElem);
      detailsDiv.appendChild(nameSpan);

      // Remove button
      const removeBtn = document.createElement('button');
      removeBtn.classList.add('remove-btn');
      removeBtn.textContent = 'Remove';
      removeBtn.title = 'Remove this item';
      removeBtn.addEventListener('click', () => {
        shoppingList.splice(idx, 1);
        renderList();
      });

      li.appendChild(detailsDiv);
      li.appendChild(removeBtn);
      listElem.appendChild(li);
    });
  }

  // Autocomplete search for items
  itemInput.addEventListener('input', () => {
    const val = itemInput.value.toLowerCase();
    closeAutocomplete();

    if (!val) return;

    const matches = availableItems.filter(item => item.name.toLowerCase().includes(val));
    if (matches.length === 0) return;

    matches.slice(0, 8).forEach(match => {
      const div = document.createElement('div');
      div.classList.add('autocomplete-item');
      div.textContent = `${match.name} (${match.qty} ${match.unit})`;
      div.addEventListener('click', () => {
        itemInput.value = match.name;
        quantityInput.value = match.qty;
        unitSelect.value = match.unit;
        closeAutocomplete();
      });
      autocompleteList.appendChild(div);
    });
  });

  function closeAutocomplete() {
    autocompleteList.innerHTML = '';
  }

  document.addEventListener('click', (e) => {
    if (e.target !== itemInput) closeAutocomplete();
  });

  // Dark mode toggle
  function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
  }

  // Share functions
  function shareText(text, url) {
    if (navigator.share) {
      navigator.share({
        title: 'Shopping List',
        text,
        url
      }).catch(console.error);
    } else {
      alert('Share not supported on this browser');
    }
  }

  function getShoppingListText() {
    if (shoppingList.length === 0) return 'Shopping list is empty.';
    return shoppingList.map(item => `${item.qty} ${item.unit} ${item.name}`).join('\n');
  }

  function shareWhatsApp() {
    const text = encodeURIComponent(getShoppingListText());
    const url = `https://wa.me/?text=${text}`;
    shareText(getShoppingListText(), url);
  }

  function shareTwitter() {
    const text = encodeURIComponent(getShoppingListText());
    const url = `https://twitter.com/intent/tweet?text=${text}`;
    shareText(getShoppingListText(), url);
  }
</script>

</body>
</html>


