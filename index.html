<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grocery Manager</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-image: url('https://images.unsplash.com/photo-1662284972119-b83a58515a15?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: #222;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    h1 {
      color: #ff5722;
      font-size: 2.5rem;
    }
    input, button {
      margin: 10px 0;
      padding: 15px 12px;
      border: none;
      border-radius: 5px;
      font-size: 1.1rem;
      cursor: pointer;
    }
    input {
      width: 100%;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background-color: #ff5722;
      color: white;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #e64a19;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li {
      background: rgba(255, 255, 255, 0.9);
      margin: 5px 0;
      padding: 12px 15px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    li input[type="number"],
    li input[type="text"] {
      width: 70px;
      padding: 8px;
      margin: 5px 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    #darkModeToggle {
      background-color: #444;
      margin-bottom: 15px;
    }
    #autocomplete {
      position: absolute;
      z-index: 1000;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-top: -8px;
      width: calc(100% - 20px);
      max-height: 150px;
      overflow-y: auto;
    }
    #autocomplete div {
      padding: 10px;
      cursor: pointer;
    }
    #autocomplete div:hover {
      background-color: #f0f0f0;
    }
    /* Dark mode styles */
    body.dark {
      background-color: #121212;
      background-image: none;
      color: #ddd;
    }
    body.dark h1 {
      color: #ff8a50;
    }
    body.dark button {
      background-color: #ff8a50;
      color: #121212;
    }
    body.dark button:hover {
      background-color: #ff5722;
      color: white;
    }
    body.dark li {
      background: #222;
      color: #ddd;
    }
    body.dark li input[type="number"],
    body.dark li input[type="text"] {
      background: #333;
      border: 1px solid #555;
      color: #ddd;
    }
    body.dark #autocomplete div {
      background-color: #222;
      color: #ddd;
    }
  </style>
</head>
<body>
  <h1>Grocery Manager</h1>
  <button id="darkModeToggle">Toggle Dark Mode</button>
  <div style="position: relative;">
    <input type="text" id="searchBar" placeholder="Search for items..." />
    <div id="autocomplete"></div>
  </div>
  <button id="toggleAllBtn">Show All Items</button>
  <ul id="itemsList"></ul>
  <h2>Your List</h2>
  <ul id="addedList"></ul>

  <script>
    const items = [
      { name: "Påse Napolitana salads mix", quantity: 1, unit: "pack" },
  { name: "Tomat", quantity: 1, unit: "kg" },
  { name: "Championer", quantity: 1, unit: "kg" },
  { name: "Rödlök", quantity: 1, unit: "kg" },
  { name: "Margarin flytande rama", quantity: 1, unit: "st" },
  { name: "Olivolja extra virgin", quantity: 5, unit: "L" },
  { name: "Gurka ofilmad", quantity: 1, unit: "kg" },
  { name: "Citron", quantity: 1, unit: "kg" },
  { name: "Handskalade räkor", quantity: 1, unit: "hink" },
  { name: "Granny Smith äpplen gröna", quantity: 0.5, unit: "kg" },
  { name: "Ramlösa naturell i burk", quantity: 1, unit: "flak" },
  { name: "Coca Cola i burk", quantity: 1, unit: "flak" },
  { name: "Coca Cola Zero i burk", quantity: 1, unit: "flak" },
  { name: "Standard mjölk", quantity: 1, unit: "L" },
  { name: "Spray grädde", quantity: 1, unit: "st" },
  { name: "Rama grädde", quantity: 1, unit: "L" },
  { name: "Riven mozzarella ost", quantity: 1, unit: "påse" },
  { name: "Riven grano padano", quantity: 1, unit: "påse" },
  { name: "Smör red label Arla", quantity: 500, unit: "g" },
  { name: "Bakad potatis", quantity: 15, unit: "st" },
  { name: "Spaghetti", quantity: 5, unit: "kg" },
  { name: "Chèvre rulle", quantity: 1, unit: "st" },
  { name: "Mospotatis chefs cut", quantity: 1, unit: "påse" },
  { name: "Ruccola", quantity: 1, unit: "ask" },
  { name: "Lime", quantity: 1, unit: "kg" },
  { name: "Basilika", quantity: 1, unit: "ask" },
  { name: "Färsk mynta", quantity: 1, unit: "knippe" },
  { name: "Apelsin", quantity: 1, unit: "kg" },
  { name: "Salami Milano", quantity: 1, unit: "ask" },
  { name: "Stenbitsrom", quantity: 1, unit: "burk" },
  { name: "Kokta ägg skalade", quantity: 1, unit: "hink" },
  { name: "Jordnötter saltade", quantity: 1, unit: "påse" },
  { name: "Valnötskärnor", quantity: 1, unit: "påse" },
  { name: "Vitlökskrutonger", quantity: 1, unit: "påse" },
  { name: "Grillad kycklingbröst fryst", quantity: 1, unit: "kartong" },
  { name: "Dill", quantity: 1, unit: "knippe" },
  { name: "Tvättad kul potatis", quantity: 1, unit: "kg" },
  { name: "Roman huvuden", quantity: 1, unit: "st" },
  { name: "Godmorgon apelsinjuice", quantity: 1, unit: "st" },
  { name: "Godmorgon äpple juice", quantity: 1, unit: "st" },
  { name: "Sprite i burk", quantity: 1, unit: "flak" },
  { name: "Mozzarella bollar", quantity: 1, unit: "kartong" },
  { name: "Prochutto crudo", quantity: 1, unit: "ask" },
  { name: "Fryst lingon", quantity: 1, unit: "kartong" },
  { name: "Crisp sallad", quantity: 1, unit: "st" }
    ];

    const searchBar = document.getElementById("searchBar");
    const itemsList = document.getElementById("itemsList");
    const addedList = document.getElementById("addedList");
    const toggleAllBtn = document.getElementById("toggleAllBtn");
    const darkModeToggle = document.getElementById("darkModeToggle");
    const autocomplete = document.getElementById("autocomplete");

    let addedItems = [];
    let showAllItems = false;

    function saveToStorage(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch (e) {
        console.error("LocalStorage is not accessible.");
      }
    }

    function loadFromStorage(key, defaultValue) {
      try {
        const saved = localStorage.getItem(key);
        return saved ? JSON.parse(saved) : defaultValue;
      } catch (e) {
        console.error("LocalStorage is not accessible.");
        return defaultValue;
      }
    }

    function addItem(item) {
      if (addedItems.some((i) => i.name === item.name)) return;
      addedItems.push({ ...item });
      saveToStorage("groceryList", addedItems);
      renderAddedList();
      renderItemsList(filterItems(searchBar.value));
    }

    function removeItem(itemName) {
      addedItems = addedItems.filter((i) => i.name !== itemName);
      saveToStorage("groceryList", addedItems);
      renderAddedList();
      renderItemsList(filterItems(searchBar.value));
    }

    function renderItemsList(filteredItems) {
      itemsList.innerHTML = "";
      filteredItems.forEach((item) => {
        if (addedItems.some((i) => i.name === item.name)) return;

        const li = document.createElement("li");
        li.textContent = `${item.name} (${item.quantity} ${item.unit})`;

        const btn = document.createElement("button");
        btn.textContent = "Add to List";
        btn.onclick = () => addItem(item);

        li.appendChild(btn);
        itemsList.appendChild(li);
      });

      if (filteredItems.length === 0) {
        const li = document.createElement("li");
        li.textContent = "No items found";
        itemsList.appendChild(li);
      }
    }

    function filterItems(query) {
      return items.filter((item) =>
        item.name.toLowerCase().includes(query.trim().toLowerCase())
      );
    }

    searchBar.addEventListener("input", () => {
      const query = searchBar.value.trim();
      renderAutocomplete(filterItems(query));
      renderItemsList(filterItems(query));
    });

    toggleAllBtn.addEventListener("click", () => {
      showAllItems = !showAllItems;
      toggleAllBtn.textContent = showAllItems ? "Hide All Items" : "Show All Items";
      renderItemsList(filterItems(""));
    });

    darkModeToggle.addEventListener("click", () => {
      const isDark = document.body.classList.toggle("dark");
      saveToStorage("darkMode", isDark);
    });

    renderAddedList();
    renderItemsList(filterItems(""));
    // Add this near the end of your script, after renderAddedList() and renderItemsList()

// Share list function
function shareList(platform) {
  if (addedItems.length === 0) {
    alert("Your list is empty!");
    return;
  }
  const listText = addedItems.map(i => `${i.name} (${i.quantity} ${i.unit})`).join("\n");
  const encodedText = encodeURIComponent("My Grocery List:\n" + listText);
  let url = "";
  switch (platform) {
    case "whatsapp":
      url = `https://wa.me/?text=${encodedText}`;
      break;
    case "twitter":
      url = `https://twitter.com/intent/tweet?text=${encodedText}`;
      break;
    case "facebook":
      url = `https://www.facebook.com/sharer/sharer.php?u=&quote=${encodedText}`;
      break;
  }
  window.open(url, "_blank");
}

// Inject share buttons with SVG icons under the "Your List" heading
function injectShareButtons() {
  const header = document.querySelector("h2");
  const container = document.createElement("div");
  container.style.margin = "10px 0";

  const btnData = [
    { platform: "whatsapp", color: "#25D366", svg: `<svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M20.52 3.48A11.83 11.83 0 0 0 12 0C5.373 0 0 5.373 0 12c0 2.11.555 4.08 1.52 5.84L0 24l6.3-1.65a11.85 11.85 0 0 0 5.7 1.5c6.627 0 12-5.373 12-12a11.83 11.83 0 0 0-3.48-8.34zm-8.52 17.4a9.62 9.62 0 0 1-4.9-1.32l-.35-.22-3.73.97 1-3.63-.22-.36a9.57 9.57 0 1 1 7.2 4.56zm5.35-7.8c-.14-.07-.82-.4-.95-.45-.12-.06-.2-.07-.28.07-.07.13-.27.45-.33.54-.06.09-.12.1-.23.03-.82-.4-1.37-.73-1.91-1.67-.14-.24.14-.22.4-.73.05-.1 0-.17-.03-.24-.07-.08-.28-.66-.38-.9-.1-.23-.2-.2-.28-.2-.07 0-.15 0-.23 0-.08 0-.22.03-.34.16-.12.13-.46.45-.46 1.1 0 .65.47 1.27.54 1.36.07.08.95 1.46 2.3 2.05.32.14.57.22.76.29.32.12.61.1.84.06.26-.05.82-.33.94-.64.13-.31.13-.58.09-.64-.04-.06-.15-.1-.29-.17z"/></svg>` },
    { platform: "twitter", color: "#1DA1F2", svg: `<svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M24 4.557a9.83 9.83 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724 9.865 9.865 0 0 1-3.127 1.195 4.92 4.92 0 0 0-8.384 4.482A13.953 13.953 0 0 1 1.67 3.149 4.92 4.92 0 0 0 3.195 9.723a4.902 4.902 0 0 1-2.229-.616v.062a4.922 4.922 0 0 0 3.946 4.827 4.902 4.902 0 0 1-2.224.084 4.923 4.923 0 0 0 4.6 3.417A9.867 9.867 0 0 1 0 21.54a13.924 13.924 0 0 0 7.548 2.209c9.058 0 14.01-7.512 14.01-14.01 0-.213-.004-.425-.014-.636A10.012 10.012 0 0 0 24 4.557z"/></svg>` },
    { platform: "facebook", color: "#4267B2", svg: `<svg height="24" viewBox="0 0 24 24" width="24" fill="white"><path d="M22.675 0H1.325C.593 0 0 .593 0 1.326v21.348C0 23.406.593 24 1.325 24h11.495v-9.294H9.691v-3.622h3.13V8.41c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.464.099 2.795.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.763v2.31h3.59l-.467 3.622h-3.123V24h6.116c.73 0 1.324-.594 1.324-1.326V1.326C24 .593 23.406 0 22.675 0z"/></svg>` }
  ];

  btnData.forEach(({ platform, color, svg }) => {
    const btn = document.createElement("button");
    btn.style.backgroundColor = color;
    btn.style.border = "none";
    btn.style.marginRight = "8px";
    btn.style.padding = "8px";
    btn.style.borderRadius = "5px";
    btn.style.cursor = "pointer";
    btn.title = `Share on ${platform.charAt(0).toUpperCase() + platform.slice(1)}`;
    btn.innerHTML = svg;
    btn.onclick = () => shareList(platform);
    container.appendChild(btn);
  });

  header.insertAdjacentElement("afterend", container);
}

injectShareButtons();

  </script>
</body>
</html>

